syntax = "proto3";

package cosim;

service Cosim {
    rpc CosimCall(stream CosimRequest) returns (stream CosimResponse) {};
}


enum CosimActionType {
    COSIM_ACTION_CONSUME = 0;
    COSIM_ACTION_PRODUCE = 1;
    COSIM_ACTION_TERMINATE = 2;
    COSIM_ACTION_AUTHENTICATE = 3;
}

message AuthMeta {
    string user = 1;
    string api_key = 2;
    string auth_token = 3;
    string auth_handle = 4;
}

message CosimRequest {
    AuthMeta auth_token = 1;
    CosimActionType action = 2;
    string cluster_handle_address = 3;
    string job_id = 4;
    string agent_id = 5;
    string external_state_block_id = 6;
    string value = 7;
    string type = 8;
    optional double time = 9;
}

message CosimResponse {
    double time = 1;
    string type = 2;
    string state = 3;
    string value = 4;
    int32 other = 5;
    CosimActionType action = 6;
    string external_state_block_id = 7;
}

